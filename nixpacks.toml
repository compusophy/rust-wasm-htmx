providers = ["rust"]

[variables]
RUST_VERSION = "1.75"

[phases.setup]
nixPkgs = ["cargo", "rustc", "wasm-pack", "binaryen", "gcc"]

[phases.build]
cmd = "echo '🦀 Building WASM...' && wasm-pack build --target web --out-dir pkg --verbose && echo '📁 WASM files created:' && ls -la pkg/ && echo '🦀 Building Rust server...' && cargo build --release --bin server --verbose && echo '✅ Build complete!'"

[phases.start]
cmd = "cargo run --release --bin server" 