providers = ["rust"]

[variables]
RUST_VERSION = "1.75"

[phases.setup]
nixPkgs = ["cargo", "rustc", "wasm-pack", "binaryen", "gcc"]

[phases.build]
cmd = "wasm-pack build --target web --out-dir pkg && cargo build --release --bin server"

[phases.start]
cmd = "cargo run --release --bin server" 