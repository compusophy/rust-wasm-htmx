providers = ["node", "rust"]

[variables]
NPM_CONFIG_PRODUCTION = "false"
NODE_VERSION = "18"

[phases.setup]
nixPkgs = ["nodejs_18", "cargo", "rustc", "wasm-pack", "binaryen"]

[phases.build]
cmd = "npm ci && npm run build"

[phases.start]
cmd = "npm run start:production" 